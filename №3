from sqlalchemy import create_engine, MetaData, Table, Column, Integer, String, Float, text

engine = create_engine('sqlite:///sneakers.db')
meta = MetaData()

sneakers = Table(
   'sneakers', meta,
   Column('id', Integer, primary_key=True),
   Column('name', String),
   Column('count', Integer),
   Column('manufacture', String),
   Column('price', Float),
   Column('size', Float),
)
meta.create_all(engine)

#########################
class Service:
    @staticmethod
    def addSneakers(name, count, manufacture, price, size):
        ins = sneakers.insert().values(name=name, count=count, manufacture=manufacture, price=price, size=size)
        conn = engine.connect()
        result = conn.execute(ins)

    @staticmethod
    def viewAll():
        s = sneakers.select()
        conn = engine.connect()
        result = conn.execute(s)

        for row in result:
            print(row)

    @staticmethod
    def delete(id):
        conn = engine.connect()
        stmt = sneakers.delete().where(sneakers.c.id == id)
        conn.execute(stmt)

    @staticmethod
    def statistic():
        conn = engine.connect()
        t = text("SELECT COUNT(id) FROM SNEAKERS")
        result = conn.execute(t)

        for row in result:
            print(row[0])
#########################

while True:
    print('Что хотите сделать?\n'
          '1 - добавление\n'
          '2 - отображение всего\n'
          '3 - удалить позицию\n'
          '4 - статистика по позициям\n')
    command = input()
    if command == '1':
        print('Введите название кроссовок:')
        Name = input()
        print('Введите кол-во кроссовок:')
        Count = int(input())
        print('Введите производителя:')
        Manufacture = input()
        print('Введите цену:')
        Price = float(input())
        print('Введите размер:')
        Size = float(input())

        Service.addSneakers(Name, Count, Manufacture, Price, Size)

    elif command == '2':
        Service.viewAll()

    elif command == '3':
        print('Введите id для удаления:')
        del_id = int(input())

        Service.delete(del_id)

    elif command == '4':
        Service.statistic()
